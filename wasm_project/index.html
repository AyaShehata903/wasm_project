<!DOCTYPE html>
<html>
<body>

<h2>String Encryption Tool üîê</h2>

<input id="text" type="text" placeholder="Enter text">
<br><br>

<button onclick="encryptText()">Encrypt (+3)</button>
<button onclick="decryptText()">Decrypt (-3)</button>

<p id="result"></p>

<script src="hello.js"></script>

<script>

function sendStringToWasm(str, funcName) {

    let length = Module.lengthBytesUTF8(str) + 1;
    let ptr = Module._malloc(length);

    Module.stringToUTF8(str, ptr, length);

    let resultPtr = Module.ccall(
        funcName,
        'number',
        ['number'],
        [ptr]
    );

    let result = Module.UTF8ToString(resultPtr);

    document.getElementById("result").innerText = result;
}

function encryptText() {
    let text = document.getElementById("text").value;
    sendStringToWasm(text, 'encrypt');
}

function decryptText() {
    let text = document.getElementById("text").value;
    sendStringToWasm(text, 'decrypt');
}

</script>

</body>
</html>